function e(e,t,s,i){Object.defineProperty(e,t,{get:s,set:i,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequiree2db,s=t.register;s("5sdYI",function(s,i){e(s.exports,"diagram",function(){return V});var r=t("iaJms"),a=t("55XQZ"),o=t("fMd7L"),l=t("sYKpE"),n=t("7twxt");t("4N9ZH"),t("egQ6Y"),t("8OmUC"),t("3gEdO"),t("g4bpM"),t("b168C");let d="rect",c="rectWithTitle",p="statediagram",g=`${p}-state`,b="transition",u=`${b} note-edge`,f=`${p}-note`,h=`${p}-cluster`,y=`${p}-cluster-alt`,w="parent",x="note",m="----",$=`${m}${x}`,T=`${m}${w}`,S="fill:none",D="fill: #333",v="text",A="normal",k={},B=0;function E(e="",t=0,s="",i=m){let r=null!==s&&s.length>0?`${i}${s}`:"";return`state-${e}${r}-${t}`}let R=(e,t,s,i,a,o)=>{var n;let p=s.id,b=null==(n=i[p])?"":n.classes?n.classes.join(" "):"";if("root"!==p){let t=d;!0===s.start&&(t="start"),!1===s.start&&(t="end"),s.type!==r.D&&(t=s.type),k[p]||(k[p]={id:p,shape:t,description:(0,l.e).sanitizeText(p,(0,l.c)()),classes:`${b} ${g}`});let i=k[p];s.description&&(Array.isArray(i.description)?(i.shape=c,i.description.push(s.description)):i.description.length>0?(i.shape=c,i.description===p?i.description=[s.description]:i.description=[i.description,s.description]):(i.shape=d,i.description=s.description),i.description=(0,l.e).sanitizeTextOrArray(i.description,(0,l.c)())),1===i.description.length&&i.shape===c&&(i.shape=d),!i.type&&s.doc&&((0,l.l).info("Setting cluster for ",p,M(s)),i.type="group",i.dir=M(s),i.shape=s.type===r.a?"divider":"roundedWithTitle",i.classes=i.classes+" "+h+" "+(o?y:""));let a={labelStyle:"",shape:i.shape,labelText:i.description,classes:i.classes,style:"",id:p,dir:i.dir,domId:E(p,B),type:i.type,padding:15};if(a.centerLabel=!0,s.note){let t={labelStyle:"",shape:"note",labelText:s.note.text,classes:f,style:"",id:p+$+"-"+B,domId:E(p,B,x),type:i.type,padding:15},r={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:i.classes,style:"",id:p+T,domId:E(p,B,w),type:"group",padding:0};B++;let o=p+T;e.setNode(o,r),e.setNode(t.id,t),e.setNode(p,a),e.setParent(p,o),e.setParent(t.id,o);let l=p,n=t.id;"left of"===s.note.position&&(l=t.id,n=p),e.setEdge(l,n,{arrowhead:"none",arrowType:"",style:S,labelStyle:"",classes:u,arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A})}else e.setNode(p,a)}t&&"root"!==t.id&&((0,l.l).trace("Setting node ",p," to be child of its parent ",t.id),e.setParent(p,t.id)),s.doc&&((0,l.l).trace("Adding nodes children "),C(e,s,s.doc,i,a,!o))},C=(e,t,s,i,a,o)=>{(0,l.l).trace("items",s),s.forEach(s=>{switch(s.stmt){case r.b:case r.D:R(e,t,s,i,a,o);break;case r.S:{R(e,t,s.state1,i,a,o),R(e,t,s.state2,i,a,o);let r={id:"edge"+B,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:S,labelStyle:"",label:(0,l.e).sanitizeText(s.description,(0,l.c)()),arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A,classes:b};e.setEdge(s.state1.id,s.state2.id,r,B),B++}}})},M=(e,t=r.c)=>{let s=t;if(e.doc)for(let t=0;t<e.doc.length;t++){let i=e.doc[t];"dir"===i.stmt&&(s=i.value)}return s},N=async function(e,t,s,i){let r;(0,l.l).info("Drawing state diagram (v2)",t),k={},i.db.getDirection();let{securityLevel:c,state:g}=(0,l.c)(),b=g.nodeSpacing||50,u=g.rankSpacing||50;(0,l.l).info(i.db.getRootDocV2()),i.db.extract(i.db.getRootDocV2()),(0,l.l).info(i.db.getRootDocV2());let f=i.db.getStates(),h=new a.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:M(i.db.getRootDocV2()),nodesep:b,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});R(h,void 0,i.db.getRootDocV2(),f,i.db,!0),"sandbox"===c&&(r=(0,o.select)("#i"+t));let y="sandbox"===c?(0,o.select)(r.nodes()[0].contentDocument.body):(0,o.select)("body"),w=y.select(`[id="${t}"]`),x=y.select("#"+t+" g");await (0,n.r)(x,h,["barb"],p,t),(0,l.u).insertTitle(w,"statediagramTitleText",g.titleTopMargin,i.db.getDiagramTitle());let m=w.node().getBBox(),$=m.width+16,T=m.height+16;w.attr("class",p);let S=w.node().getBBox();(0,l.i)(w,T,$,g.useMaxWidth);let D=`${S.x-8} ${S.y-8} ${$} ${T}`;for(let e of((0,l.l).debug(`viewBox ${D}`),w.attr("viewBox",D),document.querySelectorAll('[id="'+t+'"] .edgeLabel .label'))){let t=e.getBBox(),s=document.createElementNS("http://www.w3.org/2000/svg",d);s.setAttribute("rx",0),s.setAttribute("ry",0),s.setAttribute("width",t.width),s.setAttribute("height",t.height),e.insertBefore(s,e.firstChild)}},V={parser:r.p,db:r.d,renderer:{setConf:function(e){for(let t of Object.keys(e))e[t]},getClasses:function(e,t){return t.db.extract(t.db.getRootDocV2()),t.db.getClasses()},draw:N},styles:r.s,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,(0,r.d).clear()}}}),s("22J6r",function(s,i){e(s.exports,"default",function(){return a});var r=t("8ry8s"),a=function(e){return(0,r.default)(e,4)}});
//# sourceMappingURL=stateDiagram-v2-9a9d610d.106e7c9e.js.map
